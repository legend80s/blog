<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Legend80s.GitHub.io by legend80s</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Legend80s.GitHub.io</h1>
      <h2 class="project-tagline">Blog</h2>
    </section>

    <section class="main-content">
      <h1>
<a id="javascript-æ¨¡æ‹Ÿ-oop-è¯­è¨€çš„-static-å˜é‡" class="anchor" href="#javascript-%E6%A8%A1%E6%8B%9F-oop-%E8%AF%AD%E8%A8%80%E7%9A%84-static-%E5%8F%98%E9%87%8F" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JavaScript æ¨¡æ‹Ÿ OOP è¯­è¨€çš„ static å˜é‡</h1>

<p><em>TL;DR ç›´æ¥æ‹‰åˆ°æ–‡ç« æœ«å°¾çœ‹ã€Œé‡ç‚¹ã€å§</em></p>

<p>è¿›å…¥æ­£é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŠ›å‡ºä¸€ä¸ªé—®é¢˜ï¼ŒJavaScript ä¸­é™æ€å˜é‡é€šå¸¸æ˜¯ç›´æ¥å®šä¹‰åœ¨ç±»ä¸Šé¢çš„ï¼Œé‚£ä¹ˆå¦‚ä½•é€šè¿‡ç±»çš„å®ä¾‹è·å–å®ƒçš„é™æ€å˜é‡å‘¢ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">class</span> <span class="pl-en">Parent</span> {}
<span class="pl-smi">Parent</span>.<span class="pl-smi">staticProperty</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Static property from Parent<span class="pl-pds">'</span></span>;</pre></div>

<p>æˆ‘ä»¬é€šå¸¸ä¼šå°è¯•è¿™ä¹ˆåšï¼š</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">parent</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Parent</span>();
<span class="pl-smi">parent</span>.<span class="pl-smi">staticProperty</span>; <span class="pl-c"><span class="pl-c">//</span> undefined</span></pre></div>

<p>è¿™ç§æ¨¡ä»¿ä¼ ç»Ÿ OOP è¯­è¨€çš„å–æ³•ï¼Œä¼¼ä¹å¾ˆè‡ªç„¶ã€å¾ˆç¬¦åˆç›´è§‰ï¼Œä½†æ˜¯å–ä¸åˆ°é™æ€å˜é‡ <g-emoji alias="sob" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f62d.png" ios-version="6.0">ğŸ˜­</g-emoji>ï¼Œå› ä¸ºåœ¨ JavaScript ä¸­å±æ€§æ˜¯æŒ‰åŸå‹ç»§æ‰¿çš„ï¼Œ<code>staticProperty</code> å¹¶æ²¡æœ‰å®šä¹‰åœ¨åŸå‹ï¼ˆ<code>prototype</code>ï¼‰ä¸Šã€‚ä½†æ˜¯ä¸€æ—¦å®šä¹‰åœ¨åŸå‹ä¸Šï¼š<code>Parent.prototype.staticProperty = '...'</code>ï¼Œå°±æŠŠå®ƒå½“åšæ™®é€šå±æ€§äº†ï¼Œè¿èƒŒäº†é™æ€å˜é‡çš„åŸºæœ¬å®šä¹‰äº†ã€‚ä¸‹é¢ç»™å‡ºä¸€ç§è§£å†³æ–¹æ³•ï¼š</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">parent</span>.<span class="pl-c1">constructor</span>.<span class="pl-smi">staticProperty</span>; <span class="pl-c"><span class="pl-c">//</span> 'Static property from Parent'</span></pre></div>

<p>ä½†æ­¤æ³•ç”šä¸ºä¸‘é™‹ï¼Œæš´éœ²äº†å¤ªå¤šåº•å±‚ç»†èŠ‚ï¼Œä¸å¤Ÿ Naturalï¼Œä¸å¤Ÿ Intuitiveï¼ŒSo Not elegant at allï¼</p>

<p>è¿›å…¥æ­£é¢˜ï¼Œåˆ©ç”¨ <code>magic getter</code> å°è£…ç»†èŠ‚ï¼Œç»“åˆä¸Šé¢çš„è§£å†³åŠæ³•ï¼Œæˆ‘ä»¬æä¾›ä¸€ç§æ›´ä¸ºä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œå½“ç„¶é‡ç‚¹æ˜¯å’Œä¼ ç»Ÿ OOP è¯­è¨€é™æ€å˜é‡çš„ä¸‰æ¡è§„åˆ™ä¿æŒä¸€è‡´ï¼š</p>

<ol>
<li>æ—¢èƒ½é€šè¿‡ç±»ï¼Œä¹Ÿèƒ½ç›´æ¥é€šè¿‡å®ä¾‹è·å–</li>
<li>æ”¯æŒç»§æ‰¿</li>
<li>æ”¯æŒé‡å†™</li>
</ol>

<p>ç›´æ¥çœ‹ä»£ç å§</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">class</span> <span class="pl-en">Parent</span> {
  <span class="pl-k">get</span> <span class="pl-en">staticProperty</span>() {
    <span class="pl-k">return</span> <span class="pl-c1">this</span>.<span class="pl-c1">constructor</span>.<span class="pl-smi">staticProperty</span>; <span class="pl-c"><span class="pl-c">//</span> late binding</span>
  }
}

<span class="pl-smi">Parent</span>.<span class="pl-smi">staticProperty</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Static property from Parent<span class="pl-pds">'</span></span>;</pre></div>

<p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">class</span> <span class="pl-en">Parent</span> {
  <span class="pl-k">get</span> <span class="pl-en">staticProperty</span>() {
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>this.constructor.name:<span class="pl-pds">'</span></span>, <span class="pl-c1">this</span>.<span class="pl-c1">constructor</span>.<span class="pl-c1">name</span>); <span class="pl-c"><span class="pl-c">//</span> constructor will changed with the caller</span>
    <span class="pl-k">return</span> <span class="pl-c1">this</span>.<span class="pl-c1">constructor</span>.<span class="pl-smi">staticProperty</span>; <span class="pl-c"><span class="pl-c">//</span> late binding</span>
  }
}

<span class="pl-c"><span class="pl-c">//</span> è§„åˆ™ 1.1 ç›´æ¥é€šè¿‡ç±»è·å–ï¼šStatic property can be accessed by class</span>
<span class="pl-smi">Parent</span>.<span class="pl-smi">staticProperty</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Static property from Parent<span class="pl-pds">'</span></span>;

<span class="pl-k">const</span> <span class="pl-c1">parent</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Parent</span>();

<span class="pl-c"><span class="pl-c">//</span> è§„åˆ™ 1.2 ä¹Ÿèƒ½ç›´æ¥é€šè¿‡å®ä¾‹è·å–ï¼šStatic property can be accessed by it's instances</span>
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>parent.staticProperty:<span class="pl-pds">'</span></span>, <span class="pl-smi">parent</span>.<span class="pl-smi">staticProperty</span>); <span class="pl-c"><span class="pl-c">//</span> 'Static property from Parent'</span>

<span class="pl-c"><span class="pl-c">//</span> Inheritance</span>
<span class="pl-k">class</span> <span class="pl-en">Child</span> <span class="pl-k">extends</span> <span class="pl-e">Parent</span> {}

<span class="pl-c"><span class="pl-c">//</span> è§„åˆ™ 2 æ”¯æŒç»§æ‰¿ï¼šStatic property can be inherited</span>
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>Child.staticProperty:<span class="pl-pds">'</span></span>, <span class="pl-smi">Child</span>.<span class="pl-smi">staticProperty</span>); <span class="pl-c"><span class="pl-c">//</span> 'Static property from Parent'</span>

<span class="pl-c"><span class="pl-c">//</span> è§„åˆ™ 3 æ”¯æŒé‡å†™ï¼šStatic property can be overwritten</span>
<span class="pl-smi">Child</span>.<span class="pl-smi">staticProperty</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Static property from Child<span class="pl-pds">'</span></span>;

<span class="pl-k">const</span> <span class="pl-c1">child</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Child</span>();

<span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>child.staticProperty:<span class="pl-pds">'</span></span>, <span class="pl-smi">child</span>.<span class="pl-smi">staticProperty</span>); <span class="pl-c"><span class="pl-c">//</span> 'Static property from Child'</span></pre></div>

<p>es7 æ”¯æŒç›´æ¥åœ¨<a href="https://esdiscuss.org/topic/es7-property-initializers">ç±»é‡Œé¢åˆå§‹åŒ–é™æ€å˜é‡</a>ï¼Œä½†æ˜¯ç›®å‰ä» babel çš„<a href="https://babeljs.io/repl/#?babili=false&amp;evaluate=true&amp;lineWrap=false&amp;presets=es2015%2Cstage-2&amp;targets=&amp;browsers=&amp;builtIns=false&amp;code=class%20Counter%20%7B%0A%20%20static%20initialCount%20%3D%200%3B%0A%7D">ç¼–è¯‘ç»“æœ</a>æ¥çœ‹ï¼Œä¹Ÿåªæ˜¯æŠŠé™æ€å˜é‡æŒ‚è½½åœ¨ç±»ä¸Šé¢ï¼Œä¸èƒ½å®Œå…¨æ¨¡æ‹Ÿ OOP è¯­è¨€çš„é™æ€å˜é‡ã€‚</p>

<h2>
<a id="é‡ç‚¹" class="anchor" href="#%E9%87%8D%E7%82%B9" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>é‡ç‚¹</h2>

<p>æ•²é»‘æ¿ï¼Œæ³¨æ„å•¦åŒå­¦ä»¬ï¼Œå¼€å§‹åˆ’é‡ç‚¹å•¦ <g-emoji alias="grinning" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f600.png" ios-version="6.0">ğŸ˜€</g-emoji></p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">class</span> <span class="pl-en">Parent</span> {
  <span class="pl-k">get</span> <span class="pl-en">staticProperty</span>() {
    <span class="pl-k">return</span> <span class="pl-c1">this</span>.<span class="pl-c1">constructor</span>.<span class="pl-smi">staticProperty</span>; <span class="pl-c"><span class="pl-c">//</span> late binding</span>
  }
}

<span class="pl-smi">Parent</span>.<span class="pl-smi">staticProperty</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Static property from Parent<span class="pl-pds">'</span></span>;</pre></div>

<h2>
<a id="å‚è€ƒ" class="anchor" href="#%E5%8F%82%E8%80%83" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>å‚è€ƒ</h2>

<ol>
<li><a href="http://stackoverflow.com/questions/28445693/how-do-i-make-a-public-static-field-in-an-es6-class">http://stackoverflow.com/questions/28445693/how-do-i-make-a-public-static-field-in-an-es6-class</a></li>
<li><a href="https://esdiscuss.org/topic/es7-property-initializers">https://esdiscuss.org/topic/es7-property-initializers</a></li>
</ol>

<p><strong><em>By OpenSearchå‰ç«¯å›¢é˜Ÿ @ æœç´¢äº‹ä¸šéƒ¨ @ Alibaba</em></strong></p>

      <footer class="site-footer">

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
